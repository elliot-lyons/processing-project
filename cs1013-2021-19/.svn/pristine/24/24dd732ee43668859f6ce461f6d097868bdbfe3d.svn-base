class DateGraph
{
  private double xRatio;
  private double yRatio;
  
  private int screen;
  private int currentCases;
  private int colorOne;
  
  ArrayList theList;
  covidDataRow currentRow;

  DateGraph(ArrayList<covidDataRow> aList, int screen)
  { 
    theList = aList;
    this.screen = screen;
  }

  void draw()
  {
    line(LEFT_GRAPH_X_ORIGIN, GRAPH_Y_ORIGIN, LEFT_GRAPH_X_ORIGIN + GRAPH_X, GRAPH_Y_ORIGIN);                  // this draws the x-axis
    stroke(100);

    line(LEFT_GRAPH_X_ORIGIN, GRAPH_Y_ORIGIN, LEFT_GRAPH_X_ORIGIN, GRAPH_Y_ORIGIN - GRAPH_Y);                  // this draws the y-axis
    stroke(100);
  
    if (screen == MONTH_SCREEN)
    {
      xRatio = (double) GRAPH_X / (double) TOTAL_MONTHS;                                                       // this determines the spacing on the x-axis for the month labels
      yRatio = (double) GRAPH_Y / (double) ONE_MIL_MAX_CASES;                                                  // this determines how many pixels one case will be on the y-axis 

      for (int i = 0; i < allMonths.length; i++)
      {
        String currentMonth = "" + allMonths[i];
        text(currentMonth, (float) (LEFT_GRAPH_X_ORIGIN + (i * xRatio) + (xRatio / 4)),                        // this outputs each month onto the screen and puts it into the correct position
          (float) (GRAPH_Y_ORIGIN + GRAPH_X_TEXT_MARGIN));                                                     // onto the x-axis as a label 

        line((float) (LEFT_GRAPH_X_ORIGIN +(xRatio * (i + 1))), (float) GRAPH_Y_ORIGIN,                        // this adds a little vertical line divider between the x-axis labels 
          (float) (LEFT_GRAPH_X_ORIGIN +(xRatio * (i + 1))), (float) GRAPH_Y_ORIGIN - 5);
        stroke(100);

        currentCases = 0;

        for (int j = 0; j < theList.size(); j++)
        {
          currentRow = (covidDataRow) totalList.get(j);

          if (currentRow.date.contains(currentMonth))
          {
            currentCases += currentRow.cases;                                                  
          }
        }
        
        colorOne = i * 10;                                                                                     // this is for the progressive colour in the graph bars
   
        fill(colorOne, 100, 100);
        
        rect((float) (LEFT_GRAPH_X_ORIGIN + (i * xRatio)), (float)                                             // this adds the bars onto the graphs 
          (GRAPH_Y_ORIGIN - (currentCases * yRatio)), (float) xRatio, (float) (currentCases * yRatio));
          
        fill(0);
        text(currentCases, (float) (currentCases < 1000000 ? (LEFT_GRAPH_X_ORIGIN + (i * xRatio) + 25)         // this outputs the number of cases each month onto the screen 
          : (LEFT_GRAPH_X_ORIGIN + (i * xRatio))), (float)                                                     // and puts it into the correct position
          (GRAPH_Y_ORIGIN - ((currentCases * yRatio) + GRAPH_X_TEXT_MARGIN)));
          
          text("cases", (float) (LEFT_GRAPH_X_ORIGIN + (i * xRatio) + 15),                                     // this outputs the number of cases each month onto the screen 
          (float) (GRAPH_Y_ORIGIN - ((currentCases * yRatio) + 5)));
      }
    }
  }
}
